<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta name="description" content="Sliver Example App 1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- mobile-friendly -->
<title>Sliver Example App 1</title>

<style>

  /* BODY */
  body {
    /* Light theme */
    color: black;
    background-color: white;
    /* Dark theme */
    /*
    color: white;
    background-color: black;
    */
    font-family: Verdana, sans-serif;
    font-size: 150%;
    letter-spacing: 0.25px;
    line-height: 125%;
  }
  h1 {
    font-weight: bold;
    color: #808080;
    font-size: 110%;
    text-align: center;
    margin: 40px;
  }
  h2 {
    font-weight: bold;
    color: #007700;
    font-size: 105%
  }
  h3 {
    font-weight: bold;
    color: #007700;
    font-size: 100%
  }

  a:link {
    color: #007700;
  }
  a:visited {
    color: #007700;
  }
  a:active {
    color: #007700;
  }

  /* TABLE */
  table {
    border: 1px solid;
    border-collapse: collapse;
    border-color: #808080;
  }

  td {
    border: 1px solid;
    border-collapse: collapse;
    border-color: #808080;
    padding: 3px;
  }

  th {
    border: 1px solid;
    border-collapse: collapse;
    border-color: #808080;
    padding: 3px;
  }

  .dataTable.table {
    border: 1px solid;
  }
  .dataTable.tr {
    border: 1px solid;
  }
  .dataTable.th {
    color: #202020;
    background-color: #e0e0e0;
    font-weight: bold;
    padding: 4px;
  }
  .dataTable.td {
    padding: 4px;
    font-family: "Courier New";
  }

  /* ERROR */
  .error {
    color: red;
    background-color: white;
    border: 1px solid gray;
    padding: 10px;
    margin: 10px;
  }
  
  /* BUTTON */

  button {
    font-weight: bold;
    background-color: #e8e8e8;
    border: 1px solid transparent;
    border-radius: 4px;
    margin: 4px;
    padding: 6px;
  }
  button:hover {
    /*
    background-color: #d8d8d8;
    */
    border: 1px solid transparent;
    border-radius: 4px;
    margin: 4px;
    padding: 6px;
  }
  button:active {
    /*
    font-weight: bold;
    background-color: #c0c0c0;
    border: 0px solid transparent;
    */
    border-radius: 4px;
    margin: 5px;
    padding: 5px;
  }
  button.selected {
    font-weight: bold;
  }
  button.deselected {
    font-weight: normal;
  }
  button.transparent {
    font-weight: normal;
    border: 0;
    background-color: transparent;
  }

  button.red {
    color: #ffffff;
    background-color: #a7322c;
    border: 0px solid transparent;
  }
  button.green {
    color: #ffffff;
    background-color: #238636;
  }
  button.blue {
    color: #ffffff;
    background-color: #0a66c2;
  }
  button.grey {
    color: #ffffff;
    background-color: #808080;
  }

  /* CLASSES */
  .boxed-text {
    border: 1px solid black;
    padding-top: 4px;
    padding-bottom: 4px;
    padding-left: 8px;
    padding-right: 8px;
  }

  .center {
    text-align: center;
  }

  /* INPUT */
  input {
    font-weight: bold;
    color: black;
  }

  /* SLIDER */
  .switch {
    position: relative;
    display: inline-block;
    width: 30px;
    height: 17px;
  }
  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    -webkit-transition: .4s;
    transition: .4s;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 13px;
    width: 13px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
  }
  input:checked + .slider {
    background-color: #2196F3;
  }
  input:focus + .slider {
    box-shadow: 0 0 1px #2196F3;
  }
  input:checked + .slider:before {
    -webkit-transform: translateX(13px);
    -ms-transform: translateX(13px);
    transform: translateX(13px);
  }
  /* Rounded sliders */
  .slider.round {
    border-radius: 17px;
  }
  .slider.round:before {
    border-radius: 50%;
  }

</style>

</head>

<!-- ================================================================ -->
<body>

<h1><span class="boxed-text">sliver-app-1</span></h1>

<!--
  This is a self-contained widget for error-text and cancel/X button.
  We use Sliver's setErrorWidget to route top-level errors here.
-->
<span id="error-container" class="error">
  <button
    class=transparent
    onClick='
      document.getElementById("error-container").style.display = "none";
      document.getElementById("error-text").innerHTML = "";
    '
  > &times; </button>
  <span id="error-text"> </span>
</span>

<!-- ================================================================ -->
<hr/>

<span>
  <button class="green" id="clear-text-input-1"> Loading ... </button>
  <span> Your text: </span>
  <input type=text placeholder="..." size=30 id="text-input-1"></input>
  <span> Reversed: </span>
  <span id="text-output-1" style="display:inline"> Loading ... </span>
</span>

<p/>

<!-- ================================================================ -->
<hr/>

<button class="red" id="make-an-error-happen-button"> Loading ... </button>

<!-- ================================================================ -->
<hr/>

<div>
  <button class="grey" id="select-button-1"> Loading ... </button>
  <button class="grey" id="select-button-2"> Loading ... </button>
  <button class="grey" id="select-button-3"> Loading ... </button>
</div>

<div id="selector-output">
  Loading ...
</div>

<!-- ================================================================ -->
<hr/>

<div>
  <button class="blue" id="item-switch-button"> Loading ... </button>
</div>

<div id="switch-item-1">
  <span>
    <button class="grey" id="data-table-add-row"></button>
    <button class="grey" id="data-table-clear"></button>
  </span>
  <table id="data-table"> </table>
</div>

<div id="switch-item-2">
  This is just some text. Click the button above to see the table again.
</div>

<!-- ================================================================ -->
<hr/>

<div>
  <button class="blue" id="item-switch-button-1"> Loading ... </button>
  <button class="blue" id="item-switch-button-2"> Loading ... </button>
  <button class="blue" id="item-switch-button-3"> Loading ... </button>
</div>

<div id="switch-item-1b">
The quick brown fox jumped over the lazy dogs.
</div>

<div id="switch-item-2b">
Few black taxis drive up major roads on quiet, hazy nights.
</div>

<div id="switch-item-3b">
While making deep excavations we found some quaint bronze jewelry.
</div>

<!-- ================================================================ -->
<hr/>

<button class="grey" id="toggler-button-1"> Loading ... </button>
<button class="grey" id="toggler-button-2"> Loading ... </button>
<button class="grey" id="toggler-button-3"> Loading ... </button>
<button class="grey" id="toggler-button-4"> Loading ... </button>
<button id="toggler-button-expand-all"> Loading ... </button>
<button id="toggler-button-collapse-all"> Loading ... </button>
<p/>

<div id="toggler-section-1">
<b>Section 1</b>
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua.
</p>
</div>

<div id="toggler-section-2">
<b>Section 2</b>
<p>
Diam sollicitudin tempor id eu nisl nunc mi ipsum faucibus.
</p>
</div>

<div id="toggler-section-3">
<b>Section 3</b>
<p>
Sed vulputate mi sit amet mauris.
</p>
</div>

<div id="toggler-section-4">
<b>Section 4</b>
<p>
Ut tellus elementum sagittis vitae et leo duis ut.
</p>
</div>

<!-- ================================================================ -->
<hr/>

<!-- fieldset allows a nice legend, of which I enjoy the styling -->
<fieldset>
  <legend>
    <b>Font 1</b>
  </legend>
  <label>Name: <input id="font-family-input-1" list="font-names-1" /></label>
  <datalist id="font-names-1">
    <option value="Arial">
    <option value="Courier">
    <option value="Courier New">
    <option value="Garamond">
    <option value="Palatino">
    <option value="Times New Roman">
    <option value="Verdana">
  </datalist>
  <label>Style: <input id="font-style-input-1" list="font-styles-1" /></label>
  <datalist id="font-styles-1">
    <option value="normal">
    <option value="italic">
    <option value="oblique">
  </datalist>
  <label>Weight: <input id="font-weight-input-1" list="font-weights-1" /></label>
  <datalist id="font-weights-1">
    <option value="1">
    <option value="thin">
    <option value="normal">
    <option value="400">
    <option value="bold">
    <option value="700">
    <option value="heavy">
    <option value="999">
  </datalist>
  <div id="font-output-1">
    <p>Hamburgevons. The quick brown fox jumped over the lazy dogs.</p>
    <p>HAMBURGEVONS. THE QUICK BROWN FOX JUMPED OVER THE LAZY DOGS.</p>
  </div>
</fieldset>

<!-- fieldset allows a nice legend, of which I enjoy the styling -->
<fieldset>
  <legend>
    <b>Font 2</b>
  </legend>
  <label>Name: <input id="font-family-input-2" list="font-names-2" /></label>
  <datalist id="font-names-2">
    <option value="Arial">
    <option value="Courier">
    <option value="Courier New">
    <option value="Garamond">
    <option value="Palatino">
    <option value="Times New Roman">
    <option value="Verdana">
  </datalist>
  <label>Style: <input id="font-style-input-2" list="font-styles-2" /></label>
  <datalist id="font-styles-2">
    <option value="normal">
    <option value="italic">
    <option value="oblique">
  </datalist>
  <label>Weight: <input id="font-weight-input-2" list="font-weights-2" /></label>
  <datalist id="font-weights-2">
    <option value="1">
    <option value="thin">
    <option value="normal">
    <option value="400">
    <option value="bold">
    <option value="700">
    <option value="heavy">
    <option value="999">
  </datalist>
  <div id="font-output-2">
    <p>Hamburgevons. The quick brown fox jumped over the lazy dogs.</p>
    <p>HAMBURGEVONS. THE QUICK BROWN FOX JUMPED OVER THE LAZY DOGS.</p>
  </div>
</fieldset>

<!-- ================================================================ -->
<hr/>

<div>
  Source and documentation: <a href="https://github.com/johnkerl/sliver">https://github.com/johnkerl/sliver</a>
</div>
<p/>

<div>
  <label class="switch">
    <input type="checkbox" id="light-theme-dark-theme-toggle">
    <span class="slider round"></span>
  </label>
  <span id="light-theme-dark-theme-label">Loading ...</span>
</div>
<p/>

<!-- ================================================================ -->
<script type=module>
  'use strict';

  import {
    Button,
    Dropdown,
    GenericElement,
    IntRangeInput,
    LightDarkThemeSlider,
    NButtonSelector,
    NButtonSwitcher,
    OneButtonSwitcher,
    Table,
    TextInput,
    TextSpan,
    URLAndPersistentNButtonToggler,
    isInteger,
    setErrorWidget,
  // } from "http://127.0.0.1:9999/sliver/dev/classes.js"
  // npx http-server ~/pub_http_internet -o -p 9999
  // } from "https://johnkerl.org/sliver/staging/classes.js"
  } from "https://johnkerl.org/sliver/stable/classes.js"

  setErrorWidget("error-container", "error-text")

  class App1 {

    constructor() {

      this.state = {
        "logLevel": 1, // 0,1,2,3
      }

      this.setElementsAndCallbacks()
      this.elements.textInput1.focus()
    }

    setElementsAndCallbacks() {
      this.elements = {}

      // ----------------------------------------------------------------
      this.elements.textInput1 = new TextInput(
        "text-input-1",
        (event) => {
          this.logAt1("textInput1: <<" + event.target.value + ">>")
          this.elements.textOutput1.set(event.target.value.split("").reverse().join(""))
        }
      )

      this.elements.clearTextInput1Button = new Button(
        "clear-text-input-1",
        "Clear",
        (event) => {
          this.logAt1("clearTextInput1Button click")
          this.elements.textInput1.set("")
          this.elements.textOutput1.set("")
        },
      )

      this.elements.textOutput1 = new TextSpan("text-output-1", "")

      // ----------------------------------------------------------------
      this.elements.makeAnErrorHappenButton = new Button(
        "make-an-error-happen-button",
        "Make an error happen",
        (event) => {
          throw new Error("This is an error message")
        },
      )

      // ----------------------------------------------------------------
      this.elements.switcherButton = new OneButtonSwitcher(
        "item-switch-button",
        [
          new GenericElement("switch-item-1"),
        ],
        [
          new GenericElement("switch-item-2"),
        ],
        "Label for one thing",
        "Label for other thing",
        () => {
          this.logAt1("switcherButton click")
        },
      )

      // ----------------------------------------------------------------
      this.elements.dataTable = new Table(
        "data-table",
        {
          "table": "dataTable table",
          "tr": "dataTable tr",
          "th": "dataTable th",
          "td": "dataTable td",
        },
        ["Nonce", "Hex", "Alpha"],
        {},
      )

      this.elements.dataTableAddRowButton = new Button(
        "data-table-add-row",
        "Add row to table",
        (event) => {
          let nonce = ""
          for (let i = 0; i < 6; i++) {
            nonce += Math.floor(10*Math.random()).toString()
          }

          let hx = "0x"
          for (let i = 0; i < 8; i++) {
            let idx = Math.floor(16*Math.random()).toString()
            let c = "0123456789abcdef"
            hx += c[idx]
          }

          let alpha = ""
          for (let i = 0; i < 8; i++) {
            let idx = Math.floor(26*Math.random()).toString()
            let c = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
            alpha += c[idx]
          }

          this.elements.dataTable.put(
            [
              [nonce, hx, alpha],
            ],
          )

        },
      )

      this.elements.dataTableClearButton = new Button(
        "data-table-clear",
        "Clear table",
        (event) => {
          this.elements.dataTable.reset()
        },
      )

      // ----------------------------------------------------------------
      this.elements.selectorOutput = new TextSpan("selector-output", "No option has been selected yet")
      this.elements.selector = new NButtonSelector(
        {
          "select-button-1": {
            "text": "Option 1",
            "callback": (event) => {
              this.elements.selectorOutput.set("Option 1 was selected")
            },
          },
          "select-button-2": {
            "text": "Option 2",
            "callback": (event) => {
              this.elements.selectorOutput.set("Option 2 was selected")
            },
          },
          "select-button-3": {
            "text": "Option 3",
            "callback": (event) => {
              this.elements.selectorOutput.set("Option 3 was selected")
            },
          },
        },
        "selected",   // CSS style
        "deselected", // CSS style
      )

      // ----------------------------------------------------------------
      this.elements.switcher = new NButtonSwitcher(
        {
          "item-switch-button-1": {
            "text": "Pangram 1",
            "items": [
              new GenericElement("switch-item-1b"),
            ],
            "callback": (event) => {
              this.logAt1("switcherButton1 click")
            },
          },
          "item-switch-button-2": {
            "text": "Pangram 2",
            "items": [
              new GenericElement("switch-item-2b"),
            ],
            "callback": (event) => {
              this.logAt1("switcherButton2 click")
            },
          },
          "item-switch-button-3": {
            "text": "Pangram 3",
            "items": [
              new GenericElement("switch-item-3b"),
            ],
            "callback": (event) => {
              this.logAt1("switcherButton3 click")
            },
          },
        },
        "selected",   // CSS style
        "deselected", // CSS style
      )

      // ----------------------------------------------------------------
      this.elements.toggler = new URLAndPersistentNButtonToggler(
        {
          "toggler-button-1": {
            "text": "Section 1",
            "items": [ new GenericElement("toggler-section-1") ],
            "callback": () => {},
            "urlShorthand": "section1",
          },
          "toggler-button-2": {
            "text": "Section 2",
            "items": [ new GenericElement("toggler-section-2") ],
            "callback": () => {},
            "urlShorthand": "section2",
          },
          "toggler-button-3": {
            "text": "Section 3",
            "items": [ new GenericElement("toggler-section-3") ],
            "callback": () => {},
            "urlShorthand": "section3",
          },
          "toggler-button-4": {
            "text": "Section 4",
            "items": [ new GenericElement("toggler-section-4") ],
            "callback": () => {},
            "urlShorthand": "section4",
          },
        },
        {
          "toggler-button-expand-all": {
            "text": "Expand all",
          },
        },
        {
          "toggler-button-collapse-all": {
            "text": "Collapse all",
          },
        },
        "selected",   // CSS style
        "deselected", // CSS style
      )

      // ----------------------------------------------------------------

      this.elements.fontSelectOutput1 = new GenericElement(
        "font-output-1",
      )
      this.elements.fontFamilySelectInput1 = new TextInput(
        "font-family-input-1",
        (event) => {
          this.elements.fontSelectOutput1.underlying.style.fontFamily = event.target.value
        },
      )
      this.elements.fontStyleSelectInput1 = new TextInput(
        "font-style-input-1",
        (event) => {
          this.elements.fontSelectOutput1.underlying.style.fontStyle = event.target.value
        },
      )
      this.elements.fontWeightSelectInput1 = new TextInput(
        "font-weight-input-1",
        (event) => {
          this.elements.fontSelectOutput1.underlying.style.fontWeight = event.target.value
        },
      )

      this.elements.fontSelectOutput2 = new GenericElement(
        "font-output-2",
      )
      this.elements.fontFamilySelectInput2 = new TextInput(
        "font-family-input-2",
        (event) => {
          this.elements.fontSelectOutput2.underlying.style.fontFamily = event.target.value
        },
      )
      this.elements.fontStyleSelectInput2 = new TextInput(
        "font-style-input-2",
        (event) => {
          this.elements.fontSelectOutput2.underlying.style.fontStyle = event.target.value
        },
      )
      this.elements.fontWeightSelectInput2 = new TextInput(
        "font-weight-input-2",
        (event) => {
          this.elements.fontSelectOutput2.underlying.style.fontWeight = event.target.value
        },
      )

      // ----------------------------------------------------------------
      this.elements.lightDarkThemeElement = new LightDarkThemeSlider(
        "light-theme-dark-theme-toggle",
        "light-theme-dark-theme-label",
        (event) => {
          document.body.style.backgroundColor = "white"
          document.body.style.color = "black"
        },
        (event) => {
          document.body.style.backgroundColor = "black"
          document.body.style.color = "white"
        },
      )

    }

    // ----------------------------------------------------------------
    // LOGGING METHODS

    logAt0(...args) {
      this.logAt(0, ...args)
    }

    logAt1(...args) {
      this.logAt(1, ...args)
    }

    logAt2(...args) {
      this.logAt(2, ...args)
    }

    logAt3(...args) {
      this.logAt(3, ...args)
    }

    logAt(level, ...args) {
      if (this.state.logLevel >= level) {
        console.log(...args)
      }
    }

  }

  // ----------------------------------------------------------------
  const app = new App1()
  // Expose from module visibility to top-level visibility for Console use
  window.app = app

</script>
<!-- ================================================================ -->
</body>
</html>
